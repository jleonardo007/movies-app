(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/popcorn.406b8801.png"},30:function(e,t,a){e.exports=a(60)},35:function(e,t,a){},37:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(24),i=a.n(c),s=(a(35),a(8)),o=a(3),l=a(12),u=a(2),m=a.n(u),f=a(7),p=a(6),v=a(20),d=a(13),b=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];a(37);var h=function(e){var t=e.fetchByCategory,a=e.search,c=e.filter,i=e.sort,o=Object(n.useState)(!1),l=Object(p.a)(o,2),u=l[0],m=l[1],f=Object(n.useState)(""),h=Object(p.a)(f,2),g=h[0],_=h[1],E=function(){g.trim()?(a(g),_("")):alert("Invalid Search")};return r.a.createElement("nav",{className:"features-bar"},r.a.createElement("ul",{className:"features-bar__features-list ".concat(u?"features-bar__features-list--sidebar":"")},r.a.createElement("li",{className:"features-bar__item",style:{cursor:"pointer"},onClick:function(){t("trending")}},"Trending"),r.a.createElement("li",{className:"features-bar__item",style:{cursor:"pointer"},onClick:function(){t("popular")}},"Popular"),r.a.createElement("li",{className:"features-bar__item",style:{cursor:"pointer"},onClick:function(){t()}},"Now playing"),r.a.createElement("li",{className:"features-bar__item",style:{cursor:"pointer"},onClick:function(){t("upcoming")}},"Upcoming"),r.a.createElement("li",{className:"features-bar__item"},r.a.createElement(s.b,{to:"/lists/favorites"},"Your Lists")),r.a.createElement("li",{className:"features-bar__item"},r.a.createElement("select",{name:"filter",onChange:function(e){"0"===e.target.value?(c(parseInt(e.target.value)),e.target.value=e.target.value="Genre"):c(parseInt(e.target.value))}},r.a.createElement("option",{hidden:!0,defaultValue:!0},"Genre"),r.a.createElement("option",{value:"0",style:{color:"tomato"}},"Clear filter"),b.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})))),r.a.createElement("li",{className:"features-bar__item"},r.a.createElement("select",{name:"sort",onChange:function(e){i(e.target.value),"clear"===e.target.value&&(e.target.value=e.target.value="Sort")}},r.a.createElement("option",{hidden:!0,defaultValue:!0},"Sort"),r.a.createElement("option",{value:"clear",style:{color:"tomato"}},"Clear Sort"),r.a.createElement("option",{value:"year"},"Release year"),r.a.createElement("option",{value:"popularity"},"Popularity"),r.a.createElement("option",{value:"voted"},"Most voted")))),r.a.createElement("div",{className:"toggle-sidebar",onClick:function(){m(!u)}},u?r.a.createElement(d.d,null):r.a.createElement(v.a,null)),r.a.createElement("div",{className:"features-bar__search ".concat(u?"features-bar__search--hide":"")},r.a.createElement("input",{type:"text",placeholder:"Search a movie",value:g,onChange:function(e){var t;t=e.target.value,_(t)},onKeyDown:function(e){"Enter"===e.key&&E()}}),r.a.createElement("button",{type:"submit",onClick:function(){E()}},r.a.createElement(v.b,null))))},g=(a(43),a(26)),_=a.n(g);var E=function(e){var t=e.movie,a=e.children;return r.a.createElement("article",{className:"movie-card"},r.a.createElement("div",{className:"movie-card__image"},r.a.createElement("img",{src:t.poster_path?"https://image.tmdb.org/t/p/w500".concat(t.poster_path):_.a,alt:t.original_title,title:t.original_title})),r.a.createElement("div",{className:"movie-card__title"},r.a.createElement(s.b,{to:"/movie/".concat(t.id)},t.original_title),a))},y={fetchNowPlayingMovies:function(){var e=Object(f.a)(m.a.mark((function e(){var t,a,n,r,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,e.next=3,fetch("https://api.themoviedb.org/3/movie/now_playing?api_key=af058d99e581a98b7f284b08a4b31810&language=en-US&page=".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,r=n.results,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchPopularMovies:function(){var e=Object(f.a)(m.a.mark((function e(){var t,a,n,r,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,e.next=3,fetch("https://api.themoviedb.org/3/movie/popular?api_key=af058d99e581a98b7f284b08a4b31810&language=en-US&page=".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,r=n.results,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchTrendingMovies:function(){var e=Object(f.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=af058d99e581a98b7f284b08a4b31810");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=a.results,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchUpcomingMovies:function(){var e=Object(f.a)(m.a.mark((function e(){var t,a,n,r,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,e.next=3,fetch("https://api.themoviedb.org/3/movie/upcoming?api_key=af058d99e581a98b7f284b08a4b31810&language=en-US&page=".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,r=n.results,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),searchMovie:function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,r,c,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:1,e.next=3,fetch("https://api.themoviedb.org/3/search/movie?api_key=af058d99e581a98b7f284b08a4b31810&language=en-US&query=".concat(t,"&page=").concat(a,"&include_adult=false"));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,c=r.results,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchMovie:function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=af058d99e581a98b7f284b08a4b31810&language=en-US"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchMovieVideos:function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/".concat(t,"/videos?api_key=af058d99e581a98b7f284b08a4b31810&language=en-US"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results.find((function(e){return"Trailer"===e.type})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchSimilarMovies:function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/".concat(t,"/similar?api_key=af058d99e581a98b7f284b08a4b31810&language=en-US&page=1"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results.slice(0,10));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};a(44);var O=function(){var e=Object(n.useRef)(null),t=Object(n.useState)("Now Playing"),a=Object(p.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(null),o=Object(p.a)(s,2),u=o[0],v=o[1],d=Object(n.useState)(1),b=Object(p.a)(d,2),g=b[0],_=b[1],O=Object(n.useState)(""),j=Object(p.a)(O,2),N=j[0],k=j[1],w=Object(n.useState)(0),x=Object(p.a)(w,2),S=x[0],M=x[1],C=Object(n.useState)(""),P=Object(p.a)(C,2),J=P[0],U=P[1];Object(n.useEffect)((function(){Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,y.fetchNowPlayingMovies();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(n.useEffect)((function(){localStorage.lists||localStorage.setItem("lists",JSON.stringify([{id:"favorites",name:"Favorites",listType:"default",movies:[]},{id:"view-later",name:"View later",listType:"default",movies:[]},{id:"viewed",name:"Viewed",listType:"default",movies:[]}]))}),[]),Object(n.useEffect)((function(){var t=new IntersectionObserver((function(e){e[0].isIntersecting&&_((function(e){return e+1}))}),{root:null,rootMargin:"20px",thresold:1});return e.current&&t.observe(e.current),function(){t.disconnect()}}),[]),Object(n.useEffect)((function(){var e=function(e,t){switch(t){case"year":e.sort((function(e,t){return Date.parse(t.release_date)-Date.parse(e.release_date)}));break;case"popularity":v((function(e){return Object(l.a)(e.sort((function(e,t){return t.popularity-e.popularity})))}));break;case"voted":v((function(e){return Object(l.a)(e.sort((function(e,t){return t.vote_average-e.vote_average})))}))}return e},t=function(e,t){return e.filter((function(e){return e.genre_ids.includes(t)}))};g>1&&function(){var a=Object(f.a)(m.a.mark((function a(){var n,r,i;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=[],r=[],i=[],a.t0=c,a.next="Popular Movies"===a.t0?6:"Upcoming"===a.t0?12:"Now Playing"===a.t0?18:24;break;case 6:return a.next=8,y.fetchPopularMovies(g);case 8:return n=a.sent,0!==S&&(r=t(n,S)),"clear"!==J&&(i=e(n,J)),a.abrupt("break",25);case 12:return a.next=14,y.fetchUpcomingMovies(g);case 14:return n=a.sent,0!==S&&(r=t(n,S)),"clear"!==J&&(i=e(n,J)),a.abrupt("break",25);case 18:return a.next=20,y.fetchNowPlayingMovies(g);case 20:return n=a.sent,0!==S&&(r=t(n,S)),"clear"!==J&&(i=e(n,J)),a.abrupt("break",25);case 24:return a.abrupt("break",25);case 25:v(0!==S?function(e){return e?e.concat.apply(e,Object(l.a)(r)):null}:J?function(e){return e?e.concat.apply(e,Object(l.a)(i)):null}:function(e){return e?e.concat.apply(e,Object(l.a)(n)):null});case 26:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()}),[g,c,S,J]),Object(n.useEffect)((function(){g>1&&N&&function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.searchMovie(N,g);case 2:t=e.sent,v((function(e){return e?e.concat.apply(e,Object(l.a)(t)):null}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[g,N]),Object(n.useEffect)((function(){0!==S&&v((function(e){return Object(l.a)(e.filter((function(e){return e.genre_ids.includes(S)})))}))}),[S]),Object(n.useEffect)((function(){J&&function(){switch(J){case"clear":v((function(e){return Object(l.a)(e.sort((function(e,t){return t.popularity-e.popularity})))}));break;case"year":v((function(e){return Object(l.a)(e.sort((function(e,t){return Date.parse(t.release_date)-Date.parse(e.release_date)})))}));break;case"popularity":v((function(e){return Object(l.a)(e.sort((function(e,t){return t.popularity-e.popularity})))}));break;case"voted":v((function(e){return Object(l.a)(e.sort((function(e,t){return t.vote_average-e.vote_average})))}))}}()}),[J]);var I=function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(""),k(""),_(1),v(null),0!==S&&M(0),e.t0=t,e.next="trending"===e.t0?8:"popular"===e.t0?15:"upcoming"===e.t0?22:29;break;case 8:return i("Trending Movies"),e.t1=v,e.next=12,y.fetchTrendingMovies();case 12:return e.t2=e.sent,(0,e.t1)(e.t2),e.abrupt("break",36);case 15:return i("Popular Movies"),e.t3=v,e.next=19,y.fetchPopularMovies();case 19:return e.t4=e.sent,(0,e.t3)(e.t4),e.abrupt("break",36);case 22:return i("Upcoming"),e.t5=v,e.next=26,y.fetchUpcomingMovies();case 26:return e.t6=e.sent,(0,e.t5)(e.t6),e.abrupt("break",36);case 29:return i("Now Playing"),e.t7=v,e.next=33,y.fetchNowPlayingMovies();case 33:return e.t8=e.sent,(0,e.t7)(e.t8),e.abrupt("break",36);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(t),e.next=3,y.searchMovie(t);case 3:if(a=e.sent,v(null),0!==a.length){e.next=9;break}i("No results"),e.next=16;break;case 9:return _(1),i('Results for "'.concat(t,'"')),e.t0=v,e.next=14,y.searchMovie(t);case 14:e.t1=e.sent,(0,e.t0)(e.t1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t){e.next=11;break}return M(0),i("Now Playing"),_(0),e.t0=v,e.next=7,y.fetchNowPlayingMovies();case 7:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 11:M(t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"home"},r.a.createElement(h,{fetchByCategory:I,search:T,filter:D,sort:function(e){U(e)}}),r.a.createElement("h1",{className:"home__title"},c),u?r.a.createElement("div",{className:"home__movies"},u.map((function(e,t){return r.a.createElement(E,{key:t,movie:e})}))):r.a.createElement("div",{className:"fetching-movie"},"Fetching movies"),r.a.createElement("div",{className:"home__loader",ref:e}))},j=a(21);a(45);var N=function(e){var t=e.lists,a=e.listParent,c=e.movie,i=e.addMovie,o=Object(n.useState)(""),l=Object(p.a)(o,2),u=l[0],m=l[1];return r.a.createElement("div",{className:"lists-menu"},r.a.createElement(d.b,{className:"list-icon"}),r.a.createElement("ul",{className:"lists-menu__lists"},r.a.createElement("li",{className:"list-menu__item",style:{color:"#e94560"}},a?"Go to":"Add to"),t?t.map((function(e,t){return r.a.createElement("li",{className:"list-menu__item",key:t},a?r.a.createElement(s.b,{to:"/lists/".concat(e.id)},e.name):r.a.createElement("span",{onClick:function(){i(e.id,e.name)}},e.name))})):null,r.a.createElement("li",{className:"list-menu__item"},r.a.createElement("input",{type:"text",placeholder:"Create a list",value:u,onChange:function(e){return m(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&u.trim()&&function(){var e=JSON.parse(localStorage.lists),t={};e.find((function(e){return e.name===u}))?alert('"'.concat(u,'" already exits')):(t={id:u.replace(/ /g,"-"),listType:"user list",name:u,movies:a?[]:[].concat(c)},e.push(t),localStorage.setItem("lists",JSON.stringify(e))),m("")}()}}))))};a(46);var k=function(){var e=Object(o.f)().listName,t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.lists);i(t.find((function(t){return t.id===e})))}),[e]),r.a.createElement("div",{className:"movies-list"},r.a.createElement("div",{className:"movies-list__header"},r.a.createElement("h1",{className:"movies-list__title"},c?c.name:null),r.a.createElement(s.b,{to:"/home"},r.a.createElement(d.a,{className:"movie-list__icons",title:"Go home"})),r.a.createElement(N,{className:"movie-list__icons",lists:JSON.parse(localStorage.lists),listParent:!0}),r.a.createElement(s.b,{to:"/lists/favorites"},r.a.createElement(d.c,{className:"movie-list__icons",title:"Delete this list",onClick:function(){!function(){var e=JSON.parse(localStorage.lists);"default"===c.listType?e.forEach((function(e,t,a){e.id===c.id&&(a[t].movies=[])})):e.forEach((function(e,t,a){e.id===c.id&&a.splice(t,1)})),localStorage.setItem("lists",JSON.stringify(e))}()}}))),r.a.createElement("section",{className:"movies-list__movies"},c?c.movies.map((function(e,t){return r.a.createElement(E,{movie:e,key:t},r.a.createElement(d.d,{className:"movies-list__delete-icon",title:"delete movie",onClick:function(){!function(e,t){var a=JSON.parse(localStorage.lists);c.movies.forEach((function(t,a,n){t.id===e&&n.splice(a,1)})),a.forEach((function(e,a,n){e.id===t&&(n[a]=Object(j.a)({},c))})),localStorage.setItem("lists",JSON.stringify(a)),i(Object(j.a)({},c))}(e.id,c.id)}}))})):null))},w=a(27);a(59);var x=function(){var e=Object(o.f)().id,t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(null),u=Object(p.a)(l,2),v=u[0],b=u[1],h=Object(n.useState)(null),g=Object(p.a)(h,2),_=g[0],E=g[1];return Object(n.useEffect)((function(){return Object(f.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i,t.next=3,y.fetchMovie(e);case 3:return t.t1=t.sent,(0,t.t0)(t.t1),t.t2=b,t.next=8,y.fetchMovieVideos(e);case 8:return t.t3=t.sent,(0,t.t2)(t.t3),t.t4=E,t.next=13,y.fetchSimilarMovies(e);case 13:t.t5=t.sent,(0,t.t4)(t.t5);case 15:case"end":return t.stop()}}),t)})))(),function(){i(null),b(null),E(null)}}),[e]),c?r.a.createElement("div",{className:"movie"},r.a.createElement("section",{className:"movie__poster"},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(c.poster_path),alt:c.original_title,className:"movie__poster-image"})),r.a.createElement("section",{className:"movie__description"},r.a.createElement("h1",{className:"movie__title"},c.original_title),r.a.createElement(s.b,{to:"/home"},r.a.createElement(d.a,{className:"movie-list__icons"})),r.a.createElement(N,{listParent:!1,lists:JSON.parse(localStorage.lists),movie:c,addMovie:function(e,t){var a=JSON.parse(localStorage.lists),n=a.find((function(t){return t.id===e})),r=c.id;n.movies.some((function(e){return e.id===r}))?alert('"'.concat(c.original_title,'" was added to "').concat(t,'"')):(n.movies.push(c),localStorage.setItem("lists",JSON.stringify(a)),alert('"'.concat(c.original_title,'" added to "').concat(t,'"')))}}),r.a.createElement("div",{className:"movie__details"},r.a.createElement("p",{className:"movie__overview"},c.overview),r.a.createElement("ul",{className:"movie__genres"},c.genres.map((function(e){return r.a.createElement("li",{key:e.id},e.name)}))),r.a.createElement("div",{className:"youtube-container"},r.a.createElement("h2",null,"Movie trailer"),v?r.a.createElement(w.a,{videoId:v.id,id:v.id,className:"movie__trailer"}):"Fetching video trailer"),_?0===_.length?null:r.a.createElement("aside",{className:"movie__similar-movies"},r.a.createElement("h3",null,"Similar movies"),_.map((function(e,t){return r.a.createElement(s.b,{to:"/movie/".concat(e.id),key:t},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),alt:e.original_title,title:e.original_title}))}))):"fetching similar movies"))):r.a.createElement("div",{className:"fetching-movie"},"Fetching movie")};var S=function(){return console.log("/movies-app"),r.a.createElement(s.a,{basename:"/movies-app"},r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/movie/:id"},r.a.createElement(x,null)),r.a.createElement(o.a,{path:"/lists/:listName"},r.a.createElement(k,null)),r.a.createElement(o.a,{path:"/"},r.a.createElement(O,null))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.efbdbe34.chunk.js.map